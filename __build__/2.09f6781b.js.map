{"version":3,"sources":["webpack:///2.09f6781b.js","webpack:///./client/com.chezhil.cookbook/service/cookbook.service.js?e793","webpack:///./client/com.chezhil.cookbook/states/cookbook/route.js","webpack:///./client/com.chezhil.cookbook/states/cookbook/template.html"],"names":["webpackJsonp",13,"module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","getCookbookList","id","page","_q2","Promise","_success","_error","$","ajax","type","url","data","headers","apikey","success","response","status","localStorage","setItem","JSON","stringify","updateTime","Date","getTime","cookbookItems","tngou","maxItems","total","oldValue","parse","getItem","i","length","push","error","xhr","getCookbookClass","_success2","_error2","classes","errorType","getCookbookDetail","_success3","_error3","Object","defineProperty","value","_q","cookbookService",14,"_vue","_vue2","_template","_template2","_cookbook","_cookbook2","Index","extend","template","ready","cookbookDetail","img","methods","goBack","from","this","$route","router","_currentTransition","path","$router","go","e","route","transition","_this","window","cm_cookbookDetail","to","params","$data","next","qa_id","showIndicator","then","abort","hideIndicator",15],"mappings":"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","file":"2.09f6781b.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 13:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _q = __webpack_require__(11);\n\t\n\tvar _q2 = _interopRequireDefault(_q);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getCookbookList(id, page) {\n\t    return _q2.default.Promise(function (_success, _error) {\n\t        $.ajax({\n\t            type: 'GET',\n\t            url: 'http://apis.baidu.com/tngou/cook/list',\n\t            data: {\n\t                id: id,\n\t                page: page\n\t            },\n\t            headers: {\n\t                apikey: 'a369f43a6392605426433831e10765ec'\n\t            },\n\t            success: function success(response) {\n\t                if (response.status) {\n\t                    //拿第一页的时候保存到本地\n\t                    if (page == 1) {\n\t                        localStorage.setItem('cookbook_list_' + id, JSON.stringify({\n\t                            id: id,\n\t                            updateTime: new Date().getTime(),\n\t                            page: 2,\n\t                            cookbookItems: response.tngou,\n\t                            maxItems: response.total\n\t                        }));\n\t                    } else {\n\t                        var oldValue = JSON.parse(localStorage.getItem('cookbook_list_' + id));\n\t                        for (var i = 0; i < response.tngou.length; i++) {\n\t                            oldValue.cookbookItems.push(response.tngou[i]);\n\t                        }\n\t                        oldValue.page = ++page;\n\t                        oldValue.maxItems = response.total;\n\t                        localStorage.setItem('cookbook_list_' + id, JSON.stringify(oldValue));\n\t                    }\n\t                    _success(response);\n\t                } else {\n\t                    _error('请求失败');\n\t                }\n\t            },\n\t            error: function error(xhr) {\n\t                _error('请求失败');\n\t            }\n\t        });\n\t    });\n\t}\n\t\n\tfunction getCookbookClass() {\n\t\n\t    return _q2.default.Promise(function (_success2, _error2) {\n\t\n\t        var classes = $.localStorage.getItem('cookbook_classes');\n\t        if (classes) {\n\t            _success2(classes);\n\t        } else {\n\t            $.ajax({\n\t                type: 'GET',\n\t                url: 'http://apis.baidu.com/tngou/cook/classify',\n\t                data: {\n\t                    id: 0\n\t                },\n\t                headers: {\n\t                    apikey: 'a369f43a6392605426433831e10765ec'\n\t                },\n\t                success: function success(response) {\n\t                    if (response.status) {\n\t                        localStorage.setItem('cookbook_classes', JSON.stringify(response.tngou));\n\t                        _success2(response);\n\t                    } else {\n\t                        _error2('请求失败!');\n\t                    }\n\t                },\n\t                error: function error(xhr, errorType) {\n\t                    _error2('请求失败');\n\t                }\n\t            });\n\t        }\n\t    });\n\t}\n\t\n\tfunction getCookbookDetail(id) {\n\t    return _q2.default.Promise(function (_success3, _error3) {\n\t        $.ajax({\n\t            type: 'GET',\n\t            url: 'http://apis.baidu.com/tngou/cook/show',\n\t            data: {\n\t                id: id\n\t            },\n\t            headers: {\n\t                apikey: 'a369f43a6392605426433831e10765ec'\n\t            },\n\t            success: function success(response) {\n\t                if (response.status) {\n\t                    _success3(response);\n\t                } else {\n\t                    _error3('请求失败');\n\t                }\n\t            },\n\t            error: function error(xhr, errorType) {\n\t                _error3('请求失败');\n\t            }\n\t        });\n\t    });\n\t}\n\tvar cookbookService = {\n\t    getCookbookList: getCookbookList,\n\t    getCookbookClass: getCookbookClass,\n\t    getCookbookDetail: getCookbookDetail\n\t};\n\t\n\texports.default = cookbookService;\n\n/***/ },\n\n/***/ 14:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _vue = __webpack_require__(2);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _template = __webpack_require__(15);\n\t\n\tvar _template2 = _interopRequireDefault(_template);\n\t\n\tvar _cookbook = __webpack_require__(13);\n\t\n\tvar _cookbook2 = _interopRequireDefault(_cookbook);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Index = _vue2.default.extend({\n\t    //replace : false, //必须注释掉 不然动画失效\n\t    template: _template2.default,\n\t    ready: function ready() {},\n\t    data: function data() {\n\t        return {\n\t            cookbookDetail: {\n\t                img: ''\n\t            }\n\t        };\n\t    },\n\t    methods: {\n\t        goBack: function goBack() {\n\t            try {\n\t                var from = this.$route.router._currentTransition.from;\n\t                if (typeof from.path != 'undefined') {\n\t                    this.$router.go(from.path);\n\t                } else {\n\t                    this.$router.go('cookbook/1');\n\t                }\n\t            } catch (e) {\n\t                this.$router.go('cookbook/1');\n\t            }\n\t        }\n\t    },\n\t    route: {\n\t        data: function data(transition) {\n\t            var _this = this;\n\t\n\t            //如果是服务端渲染的,应该设置全局变量,那么客户端就不用异步请求数据了\n\t            if (window.cm_cookbookDetail && window.cm_cookbookDetail.id == transition.to.params.id) {\n\t                this.$data = {\n\t                    cookbookDetail: window.cm_cookbookDetail\n\t                };\n\t                transition.next();\n\t            } else {\n\t                var qa_id = transition.to.params.id;\n\t                $.showIndicator();\n\t                _cookbook2.default.getCookbookDetail(qa_id).then(function (response) {\n\t                    if (response.status) {\n\t                        _this.$data = {\n\t                            cookbookDetail: response\n\t                        };\n\t                        transition.next();\n\t                    } else {\n\t                        transition.abort();\n\t                    }\n\t                }).catch(function () {\n\t                    transition.abort();\n\t                }).finally(function () {\n\t                    $.hideIndicator();\n\t                });\n\t            }\n\t        }\n\t    }\n\t});\n\t\n\texports.default = Index;\n\n/***/ },\n\n/***/ 15:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"page page-current\\\">\\n    <!-- 标题栏 -->\\n    <header class=\\\"bar bar-nav\\\">\\n        <a class=\\\"icon icon-left pull-left \\\" @click=\\\"goBack()\\\"></a>\\n        <h1 class=\\\"title\\\">{{cookbookDetail.name}}</h1>\\n    </header>\\n\\n    <!-- 这里是页面内容区 -->\\n    <div class=\\\"content\\\">\\n        <div class=\\\"content-padded\\\">\\n            <p style=\\\"text-align: center;\\\"><img v-if=\\\"cookbookDetail.img!=''\\\" :src=\\\"'http://tnfs.tngou.net/img'+cookbookDetail.img\\\"></p>\\n            {{{cookbookDetail.message}}}\\n        </div>\\n    </div>\\n</div>\"\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 2.09f6781b.js\n **/","'use strict';\nimport Q from 'q'\n\nfunction getCookbookList(id,page){\n    return Q.Promise((success,error)=>{\n        $.ajax({\n            type : 'GET',\n            url  : 'http://apis.baidu.com/tngou/cook/list',\n            data : {\n                id : id ,\n                page : page\n            },\n            headers : {\n                apikey : 'a369f43a6392605426433831e10765ec'\n            },\n            success : function(response){\n                if(response.status){\n                    //拿第一页的时候保存到本地\n                    if(page == 1){\n                        localStorage.setItem('cookbook_list_'+id,JSON.stringify({\n                            id : id,\n                            updateTime : new Date().getTime(),\n                            page : 2,\n                            cookbookItems : response.tngou,\n                            maxItems : response.total\n                        }));\n                    }else{\n                        let oldValue = JSON.parse(localStorage.getItem('cookbook_list_'+id));\n                        for(let i=0;i<response.tngou.length;i++){\n                            oldValue.cookbookItems.push(response.tngou[i]);\n                        }\n                        oldValue.page = ++page;\n                        oldValue.maxItems = response.total\n                        localStorage.setItem('cookbook_list_'+id,JSON.stringify(oldValue))\n                    }\n                    success(response)\n                }else{\n                    error('请求失败')\n                }\n            },\n            error : function(xhr){\n                error('请求失败')\n            }\n        });\n    })\n}\n\nfunction getCookbookClass(){\n    \n    return Q.Promise((success,error)=>{\n        \n        let classes = $.localStorage.getItem('cookbook_classes')\n        if(classes){\n            success(classes);\n        }else{\n            $.ajax({\n                type : 'GET',\n                url  : 'http://apis.baidu.com/tngou/cook/classify',\n                data : {\n                    id : 0\n                },\n                headers : {\n                    apikey : 'a369f43a6392605426433831e10765ec'\n                },\n                success : function(response){\n                    if(response.status){\n                        localStorage.setItem('cookbook_classes',JSON.stringify(response.tngou));\n                        success(response)\n                    }else{\n                        error('请求失败!')\n                    }\n                },\n                error : function(xhr, errorType){\n                    error('请求失败')\n                }\n            });\n\n        }\n       \n    })\n}\n\nfunction getCookbookDetail(id){\n    return Q.Promise((success,error)=>{\n        $.ajax({\n            type : 'GET',\n            url  : 'http://apis.baidu.com/tngou/cook/show',\n            data : {\n                id : id\n            },\n            headers : {\n                apikey : 'a369f43a6392605426433831e10765ec'\n            },\n            success : function(response){\n                if(response.status){\n                    success(response)\n                }else{\n                    error('请求失败')\n                }\n            },\n            error : function(xhr, errorType){\n                error('请求失败')\n            }\n        });\n    })\n}\nlet cookbookService = {\n    getCookbookList : getCookbookList,\n    getCookbookClass : getCookbookClass,\n    getCookbookDetail: getCookbookDetail\n};\n\nexport default cookbookService;\n\n\n/** WEBPACK FOOTER **\n ** ./client/com.chezhil.cookbook/service/cookbook.service.js\n **/","'use strict';\nimport Vue from 'vue'\nimport Tpl from './template.html'\nimport cookbookService from '../../service/cookbook.service'\n\nlet Index = Vue.extend({\n    //replace : false, //必须注释掉 不然动画失效\n    template : Tpl,\n    ready : function(){\n        \n    },\n    data : ()=>{\n        return {\n            cookbookDetail : {\n                img : '',\n            }\n        }\n    },\n    methods: {\n        goBack(){\n            try{\n                let from = this.$route.router._currentTransition.from\n                if(typeof from.path != 'undefined'){\n                    this.$router.go(from.path);\n                }else{\n                    this.$router.go('cookbook/1');\n                }\n            }catch(e){\n                this.$router.go('cookbook/1');\n            }\n        }\n    },\n    route : {\n        data : function(transition){\n            //如果是服务端渲染的,应该设置全局变量,那么客户端就不用异步请求数据了\n            if(window.cm_cookbookDetail && window.cm_cookbookDetail.id == transition.to.params.id){\n                this.$data = {\n                    cookbookDetail:window.cm_cookbookDetail\n                };\n                transition.next();\n            }else{\n                let qa_id = transition.to.params.id;\n                $.showIndicator()\n                cookbookService.getCookbookDetail(qa_id).then((response)=>{\n                    if(response.status){\n                        this.$data = {\n                            cookbookDetail : response\n                        };\n                        transition.next();\n                    }else{\n                        transition.abort();\n                    }\n                }).catch(()=>{\n                    transition.abort();\n                }).finally(()=>{\n                    $.hideIndicator();\n                })\n            }\n        }\n    }\n})\n\nexport default Index\n\n\n/** WEBPACK FOOTER **\n ** ./client/com.chezhil.cookbook/states/cookbook/route.js\n **/","module.exports = \"<div class=\\\"page page-current\\\">\\n    <!-- 标题栏 -->\\n    <header class=\\\"bar bar-nav\\\">\\n        <a class=\\\"icon icon-left pull-left \\\" @click=\\\"goBack()\\\"></a>\\n        <h1 class=\\\"title\\\">{{cookbookDetail.name}}</h1>\\n    </header>\\n\\n    <!-- 这里是页面内容区 -->\\n    <div class=\\\"content\\\">\\n        <div class=\\\"content-padded\\\">\\n            <p style=\\\"text-align: center;\\\"><img v-if=\\\"cookbookDetail.img!=''\\\" :src=\\\"'http://tnfs.tngou.net/img'+cookbookDetail.img\\\"></p>\\n            {{{cookbookDetail.message}}}\\n        </div>\\n    </div>\\n</div>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./client/com.chezhil.cookbook/states/cookbook/template.html\n ** module id = 15\n ** module chunks = 2\n **/"],"sourceRoot":""}